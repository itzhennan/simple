/*
 Author: ZZNLin
 Website: http://www.zznlin.cn
 */
var currentIndex,lastIndex=0,switchInt,handleLoginPageChangeBackground=function(){$(document).on("click",'[data-click="change-bg"]',function(b){b.preventDefault();clickBGI($(this))})},clickBGI=function(a){var b="url("+$(a).attr("data-img")+")";$('[data-id="login-cover-image"]').css("background-image",b),$('[data-click="change-bg"]').closest("li").removeClass("active"),$(a).closest("li").addClass("active")},userLogin=function(){window.addEventListener("load",function(){var b=document.getElementsByClassName("needs-validation");var a=Array.prototype.filter.call(b,function(c){c.addEventListener("submit",function(e){if(c.checkValidity()===false){e.preventDefault();e.stopPropagation()}var d=$IEC.getCurrentURI();$IEC.ajaxCall({uri:d+"/user/login",type:"post",data:$IEC.getSwitchPost($(this).serialize()),success:function(f){if(f.code==0){$IEC.doHref(d+"/admin/html/index.html")}else{$("#login-pwd").popover("show");$("body").click(hideOnClick)}}});return false},false)})},false)},hideOnClick=function(){$("#login-pwd").popover("hide");$("body").unbind("click")},LoginV2=function(){return{init:function(){handleLoginPageChangeBackground();userLogin();currentIndex=1;var a=$(".clearfix").children().length;var b=window.setInterval(function(){clickBGI($(".clearfix").children().eq(currentIndex).children().eq(0));currentIndex=currentIndex>=(a-1)?0:currentIndex+1},5000)}}}();